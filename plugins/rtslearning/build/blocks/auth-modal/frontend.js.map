{"version":3,"file":"blocks/auth-modal/frontend.js","mappings":";;UAAA;UACA;;;;;WCDA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;ACNAA,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,MAAK;EAC/C,MAAMC,YAAY,GAAGF,QAAQ,CAACG,gBAAgB,CAAC,aAAa,CAAC;EAC7D,MAAMC,OAAO,GAAGJ,QAAQ,CAACK,aAAa,CAClC,kCAAkC,CACjC;EACD,MAAMC,YAAY,GAAGN,QAAQ,CAACG,gBAAgB,CAC1C,kCAAkC,CACrC;EAELD,YAAY,CAACK,OAAO,CAACC,EAAE,IAAI;IACvBA,EAAE,CAACP,gBAAgB,CAAC,OAAO,EAAEQ,KAAK,IAAI;MAClCA,KAAK,CAACC,cAAc,EAAE;MAEtBN,OAAO,CAACO,SAAS,CAACC,GAAG,CAAC,YAAY,CAAC;IAEvC,CAAC,CAAC;EACN,CAAC,CAAC;EAEFN,YAAY,CAACC,OAAO,CAACC,EAAE,IAAI;IACvBA,EAAE,CAACP,gBAAgB,CAAC,OAAO,EAAEQ,KAAK,IAAI;MAClCA,KAAK,CAACC,cAAc,EAAE;MAEtBN,OAAO,CAACO,SAAS,CAACE,MAAM,CAAC,YAAY,CAAC;IAE1C,CAAC,CAAC;EACN,CAAC,CAAC;EAEF,MAAMC,IAAI,GAAGd,QAAQ,CAACG,gBAAgB,CAAC,SAAS,CAAC;EACjD,MAAMY,UAAU,GAAGf,QAAQ,CAACK,aAAa,CAAC,aAAa,CAAC;EACxD,MAAMW,UAAU,GAAGhB,QAAQ,CAACK,aAAa,CAAC,aAAa,CAAC;EAExDS,IAAI,CAACP,OAAO,CAACU,GAAG,IAAI;IAChBA,GAAG,CAAChB,gBAAgB,CAAC,OAAO,EAAEQ,KAAK,IAAI;MACnCA,KAAK,CAACC,cAAc,EAAE;MAEtBI,IAAI,CAACP,OAAO,CAACW,UAAU,IAAI;QACvBA,UAAU,CAACP,SAAS,CAACE,MAAM,CAAC,YAAY,CAAC;MAC7C,CAAC,CAAC;MAEFM,OAAO,CAACC,GAAG,CAACX,KAAK,CAACY,aAAa,CAAC;MAChCZ,KAAK,CAACY,aAAa,CAACV,SAAS,CAACC,GAAG,CAAC,YAAY,CAAC;MAE/C,MAAMU,SAAS,GAAGb,KAAK,CAACY,aAAa,CAACE,YAAY,CAAC,MAAM,CAAC;MAE1D,IAAGD,SAAS,KAAK,aAAa,EAAE;QAC5BP,UAAU,CAACS,KAAK,CAACC,OAAO,GAAG,OAAO;QAClCT,UAAU,CAACQ,KAAK,CAACC,OAAO,GAAG,MAAM;MACrC,CAAC,MACI;QACDV,UAAU,CAACS,KAAK,CAACC,OAAO,GAAG,MAAM;QACjCT,UAAU,CAACQ,KAAK,CAACC,OAAO,GAAG,OAAO;MACtC;IACJ,CAAC,CAAC;EACN,CAAC,CAAC;EAEFT,UAAU,CAACf,gBAAgB,CAAC,QAAQ,EAAE,MAAMQ,KAAK,IAAI;IACjDA,KAAK,CAACC,cAAc,EAAE;IAEtB,MAAMgB,cAAc,GAAGV,UAAU,CAACX,aAAa,CAAC,UAAU,CAAC;IAC3DqB,cAAc,CAACC,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;IAE7C,MAAMC,YAAY,GAAGZ,UAAU,CAACX,aAAa,CAAC,gBAAgB,CAAC;IAC/DuB,YAAY,CAACC,SAAS,GAAI;AAClC;AACA;AACA;AACA,SAAS;IAED,MAAMC,QAAQ,GAAG;MACbC,QAAQ,EAAEf,UAAU,CAACX,aAAa,CAAC,UAAU,CAAC,CAAC2B,KAAK;MACpDC,KAAK,EAAEjB,UAAU,CAACX,aAAa,CAAC,WAAW,CAAC,CAAC2B,KAAK;MAClDE,QAAQ,EAAElB,UAAU,CAACX,aAAa,CAAC,cAAc,CAAC,CAAC2B;IACvD,CAAC;IAED,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAACC,YAAY,CAACC,MAAM,EAAE;MAC9CC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACL,cAAc,EAAE;MACpB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACb,QAAQ;IACjC,CAAC,CAAC;IAEF,MAAMc,YAAY,GAAG,MAAMT,QAAQ,CAACU,IAAI,EAAE;IAE1C,IAAGD,YAAY,CAACE,MAAM,KAAK,CAAC,EAAE;MAC1BlB,YAAY,CAACC,SAAS,GAAI;AACtC;AACA;AACA;AACA,aAAa;MACDkB,QAAQ,CAACC,MAAM,EAAE;IACrB,CAAC,MAAM;MACHtB,cAAc,CAACuB,eAAe,CAAC,UAAU,CAAC;MAC1CrB,YAAY,CAACC,SAAS,GAAI;AACtC;AACA;AACA;AACA,aAAa;IACL;EAEJ,CAAC,CAAC;EAEFd,UAAU,CAACd,gBAAgB,CAAC,QAAQ,EAAE,MAAMQ,KAAK,IAAI;IACjDA,KAAK,CAACC,cAAc,EAAE;IAEtB,MAAMwC,cAAc,GAAGnC,UAAU,CAACV,aAAa,CAAC,UAAU,CAAC;IAC3D,MAAM8C,YAAY,GAAGpC,UAAU,CAACV,aAAa,CAAC,gBAAgB,CAAC;IAE/D6C,cAAc,CAACvB,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC;IAC7CuB,cAAc,CAACrB,SAAS,GAAI;AACpC;AACA;AACA;AACA,SAAS;IAED,MAAMC,QAAQ,GAAG;MACbsB,UAAU,EAAErC,UAAU,CAACV,aAAa,CAAC,WAAW,CAAC,CAAC2B,KAAK;MACvDE,QAAQ,EAAEnB,UAAU,CAACV,aAAa,CAAC,cAAc,CAAC,CAAC2B;IACvD,CAAC;IAED,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAACC,YAAY,CAACgB,MAAM,EAAE;MAC9Cd,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACL,cAAc,EAAE;MACpB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACb,QAAQ;IACjC,CAAC,CAAC;IAEF,MAAMc,YAAY,GAAG,MAAMT,QAAQ,CAACU,IAAI,EAAE;IAE1C,IAAGD,YAAY,CAACE,MAAM,KAAK,CAAC,EAAE;MAC1BK,YAAY,CAACtB,SAAS,GAAI;AACtC;AACA;AACA;AACA,aAAa;MACDkB,QAAQ,CAACC,MAAM,EAAE;IACrB,CAAC,MAAM;MACHE,cAAc,CAACD,eAAe,CAAC,UAAU,CAAC;MAC1CC,cAAc,CAACrB,SAAS,GAAI;AACxC;AACA;AACA;AACA,aAAa;IACL;EACJ,CAAC,CAAC;AACN,CAAC,CAAC,C","sources":["webpack://rtslearning/webpack/bootstrap","webpack://rtslearning/webpack/runtime/make namespace object","webpack://rtslearning/./src/blocks/auth-modal/frontend.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","document.addEventListener('DOMContentLoaded', () =>{\r\n    const openModalBtn = document.querySelectorAll('.open-modal')\r\n    const modalEl = document.querySelector(\r\n        '.wp-block-rtslearning-auth-modal'\r\n        )\r\n        const modalCloseEl = document.querySelectorAll(\r\n            '.modal-overlay, .modal-btn-close'\r\n        )\r\n\r\n    openModalBtn.forEach(el => { \r\n        el.addEventListener('click', event => {\r\n            event.preventDefault()\r\n\r\n            modalEl.classList.add('modal-show')\r\n\r\n        })\r\n    })\r\n    \r\n    modalCloseEl.forEach(el => {\r\n        el.addEventListener('click', event => {\r\n            event.preventDefault()\r\n\r\n            modalEl.classList.remove('modal-show')\r\n\r\n        })\r\n    })\r\n\r\n    const tabs = document.querySelectorAll('.tabs a')\r\n    const signinForm = document.querySelector('#signin-tab')\r\n    const signupForm = document.querySelector('#signup-tab')\r\n\r\n    tabs.forEach(tab => {\r\n        tab.addEventListener('click', event => {\r\n            event.preventDefault()\r\n\r\n            tabs.forEach(currentTab => {\r\n                currentTab.classList.remove('active-tab')\r\n            })\r\n\r\n            console.log(event.currentTarget)\r\n            event.currentTarget.classList.add('active-tab')\r\n\r\n            const activeTab = event.currentTarget.getAttribute('href')\r\n\r\n            if(activeTab === '#signin-tab') {\r\n                signinForm.style.display = 'block'\r\n                signupForm.style.display = 'none'\r\n            }\r\n            else {\r\n                signinForm.style.display = 'none'\r\n                signupForm.style.display = 'block'\r\n            }\r\n        })\r\n    })\r\n\r\n    signupForm.addEventListener('submit', async event => {\r\n        event.preventDefault()\r\n        \r\n        const signupFieldset = signupForm.querySelector('fieldset')\r\n        signupFieldset.setAttribute('disabled', true)\r\n\r\n        const signupStatus = signupForm.querySelector('#signup-status')\r\n        signupStatus.innerHTML = `\r\n        <div class=\"modal-status modal-status-info\">\r\n            Please wait! We are crating your account.\r\n        </div>\r\n        `\r\n\r\n        const formData = {\r\n            username: signupForm.querySelector('#su-name').value,\r\n            email: signupForm.querySelector('#su-email').value,\r\n            password: signupForm.querySelector('#su-password').value\r\n        }\r\n\r\n        const response = await fetch(up_auth_rest.signup, {\r\n            method: 'POST', \r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(formData)\r\n        });\r\n\r\n        const responseJSON = await response.json()\r\n\r\n        if(responseJSON.status === 2) {\r\n            signupStatus.innerHTML = `\r\n            <div class=\"modal-status modal-status-success\">\r\n                Success! Your account has been created.\r\n            </div>\r\n            `\r\n            location.reload()\r\n        } else {\r\n            signupFieldset.removeAttribute('disabled')\r\n            signupStatus.innerHTML = `\r\n            <div class=\"modal-status modal-status-danger\">\r\n                Unable to create account! Please try again later.\r\n            </div>\r\n            `\r\n        }\r\n\r\n    })\r\n\r\n    signinForm.addEventListener('submit', async event => {\r\n        event.preventDefault()\r\n\r\n        const signinFieldset = signinForm.querySelector('fieldset')\r\n        const signinStatus = signinForm.querySelector('#signin-status')\r\n\r\n        signinFieldset.setAttribute('disabled', true)\r\n        signinFieldset.innerHTML = `\r\n        <div class=\"modal-status modal-status-info\">\r\n            Please wait! We are logging you in.\r\n        </div>\r\n        `\r\n\r\n        const formData = {\r\n            user_login: signinForm.querySelector('#si-email').value,\r\n            password: signinForm.querySelector('#si-password').value\r\n        }\r\n\r\n        const response = await fetch(up_auth_rest.signin, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(formData)\r\n        })\r\n\r\n        const responseJSON = await response.json()\r\n\r\n        if(responseJSON.status === 2) {\r\n            signinStatus.innerHTML = `\r\n            <div class=\"modal-status modal-status-success\">\r\n                Success! You are now logged in.\r\n            </div>\r\n            `\r\n            location.reload()\r\n        } else {\r\n            signinFieldset.removeAttribute('disabled')\r\n            signinFieldset.innerHTML = `\r\n            <div class=\"modal-status modal-status-success\">\r\n                Invalid credentials! Please try again later.\r\n            </div>\r\n            `\r\n        }\r\n    })\r\n})"],"names":["document","addEventListener","openModalBtn","querySelectorAll","modalEl","querySelector","modalCloseEl","forEach","el","event","preventDefault","classList","add","remove","tabs","signinForm","signupForm","tab","currentTab","console","log","currentTarget","activeTab","getAttribute","style","display","signupFieldset","setAttribute","signupStatus","innerHTML","formData","username","value","email","password","response","fetch","up_auth_rest","signup","method","headers","body","JSON","stringify","responseJSON","json","status","location","reload","removeAttribute","signinFieldset","signinStatus","user_login","signin"],"sourceRoot":""}